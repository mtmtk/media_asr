#!/bin/tcsh
#***************************************************************************
#
#  マイク入力の音声の単語認識を行う
#
#
#  作成履歴
#  初版                                             2013年10月19日 高木一幸
#  Snackを利用したインターフェースに変更                 2013年10月25日 高木一幸
#  ボタン押下式に変更                                  2014年01月06日 緒形剛
#
#***************************************************************************
#----------------------------------------
# コマンドライン引数の処理
#----------------------------------------
if($#argv != 2) then
    echo "recog: マイク入力の音声の単語認識を行う"
    echo "使用方法"
    echo "   % recog th hmmList"
    echo "            th: 音声検出の閾値 [dB]"
    echo "       hmmList: 単語HMM一覧";
    exit 1;
endif


#----------------------------------------
# VADの閾値 [dB]
#----------------------------------------
set th = $1

#----------------------------------------
# HMMパラメータファイルリスト
#----------------------------------------
set hmmList = $2

#----------------------------------------
# オンライン認識
#----------------------------------------
while(1)
 echo -n "Returnキーを押してください"
 set buf = $<
 audioIN |\
 vad -p $th |\
 mfcc |\
 (_recog $hmmList && hupAudioIN)
end
